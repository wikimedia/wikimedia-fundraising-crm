<?xml version="1.0" encoding="iso-8859-1" ?>

<table>
  <base>CRM/Damaged</base>
  <class>Damaged</class>
  <name>damaged_view</name>
  <comment>Smashpig damaged table</comment>
  <log>true</log>
  <paths>
    <update>civicrm/damaged/edit?action=update&amp;id=[id]&amp;reset=1</update>
    <delete>civicrm/damaged/edit?action=delete&amp;id=[id]&amp;reset=1</delete>
  </paths>
  <field>
    <name>id</name>
    <type>int unsigned</type>
    <required>true</required>
    <comment>Unique Damaged Table Row ID</comment>
    <html>
      <type>Number</type>
    </html>
  </field>
  <field>
    <name>original_date</name>
    <type>datetime</type>
    <required>true</required>
    <comment>Original date</comment>
    <html>
        <type>Datetime</type>
    </html>
  </field>
  <field>
    <name>damaged_date</name>
    <type>datetime</type>
    <required>true</required>
    <comment>Damage date</comment>
    <html>
      <type>Datetime</type>
    </html>
  </field>
  <field>
    <name>retry_date</name>
    <type>datetime</type>
    <required>false</required>
    <comment>Retry date</comment>
    <html>
        <type>Datetime</type>
    </html>
  </field>
  <field>
    <name>original_queue</name>
    <type>varchar</type>
    <required>true</required>
    <comment>Original Queue</comment>
    <html>
        <type>Character</type>
    </html>
  </field>
  <field>
    <name>gateway</name>
    <type>varchar</type>
    <required>false</required>
    <comment>Gateway</comment>
    <html>
        <type>Character</type>
    </html>
  </field>
  <field>
    <name>order_id</name>
    <type>varchar</type>
    <required>false</required>
    <comment>Order ID</comment>
    <html>
        <type>Character</type>
    </html>
  </field>
  <field>
    <name>gateway_txn_id</name>
    <type>varchar</type>
    <required>false</required>
    <comment>Gateway Transaction ID</comment>
    <html>
        <type>Character</type>
    </html>
  </field>
  <field>
    <name>error</name>
    <type>text</type>
    <required>false</required>
    <comment>Error</comment>
    <html>
        <type>Text</type>
    </html>
  </field>
  <field>
    <name>trace</name>
    <type>text</type>
    <required>false</required>
    <comment>Error</comment>
    <html>
        <type>Text</type>
    </html>
  </field>
  <field>
    <name>message</name>
    <type>text</type>
    <required>true</required>
    <comment>Error</comment>
    <html>
        <type>Text</type>
    </html>
  </field>
  <primaryKey>
    <name>id</name>
    <autoincrement>true</autoincrement>
  </primaryKey>
  <primaryKey>
    <name>original_date</name>
  <autoincrement>true</autoincrement>
  </primaryKey>
  <index>
    <name>idx_damaged_original_date</name>
    <fieldName>original_date</fieldName>
    <unique>true</unique>
  </index>
  <index>
    <name>idx_damaged_original_date_original_queue</name>
    <fieldName>original_date</fieldName>
    <fieldName>original_queue</fieldName>
    <unique>true</unique>
  </index>
  <index>
    <name>idx_damaged_retry_date</name>
    <fieldName>retry_date</fieldName>
    <unique>true</unique>
  </index>
  <index>
    <name>idx_damaged_order_id_gateway</name>
    <fieldName>order_id</fieldName>
    <fieldName>gateway</fieldName>
    <unique>true</unique>
  </index>
  <index>
    <name>idx_damaged_gateway_txn_id_gateway</name>
    <fieldName>gateway_txn_id</fieldName>
    <fieldName>gateway</fieldName>
    <unique>true</unique>
  </index>
</table>

