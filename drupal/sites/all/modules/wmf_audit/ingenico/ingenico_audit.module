<?php

/**
 * Implementation of hook_menu()
 */
function ingenico_audit_menu() {
  $items = [];

  $items['admin/config/wmf_audit/ingenico_audit'] = [
    'title' => 'Ingenico Audit',
    'description' => t('Configure Ingenico audit settings.'),
    'access arguments' => ['administer wmf_audit'],
    'page callback' => 'drupal_get_form',
    'page arguments' => ['ingenico_audit_settings'],
  ];

  return $items;
}

/**
 * Callback for menu
 */
function ingenico_audit_settings() {
  $form['ingenico_audit_log_search_past_days'] = [
    '#type' => 'textfield',
    '#title' => t('Plus or minus log search (in days)'),
    '#required' => TRUE,
    '#default_value' => variable_get('ingenico_audit_log_search_past_days'),
  ];
  return system_settings_form($form);
}

function ingenico_audit_create_processor($options) {
  return new IngenicoAuditProcessor($options);
}
